<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casa de Adoção</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="img/patalogo.png" type="image/x-icon">
</head>
<body>
    <header class="header">
        <div class="logo">
            <img src="img/LOGO.png" alt="Logo">
        </div>
        <div class="search-bar">
            <input type="text" placeholder="O que você precisa?">
        </div>
        <div class="icons">
            <img src="img/coração.png" alt="Coração">
            <img src="img/shopping.png" alt="Sacola">
            <img src="img/perfil.png" alt="Perfil">
        </div>
    </header>

    <nav class="menu">
        <ul>
            <li><a href="../Home/Home.html">Home</a></li>
            <li><a href="#">Shopping</a></li>
            <li><a href="#">Doadores</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Animais</a></li>
        </ul>
    </nav>

    <section id="adoptionShelter" data-id="80580714-c9f9-45b9-a63e-d09384954c44"> <!-- ID deve ser substituído dinamicamente -->
        <div class="section1">
            <div class="profile-header">
                <h1>Casa do Pet</h1>
                <h2>Abrigo de animais</h2>
                <div class="header-underline"></div>
            </div>
            <div class="vertical-box">
                <img src="img/casadopet.svg" alt="Foto" class="vertical-box-img">
                <div class="info">
                    <p class="info-title">Nome</p>
                    <p class="info-text">Casa do Pet</p>
                    <p class="info-title">Avaliação</p><br>
                    <img src="img/estrelas.svg" alt="estrelas de Avaliação">
                    <button class="btn">Seguir</button>
                    <button class="btn">Avaliar</button>
                </div>
            </div>
            <!-- Demais informações... -->
            <div class="vertical-box2">
                <div class="header-info">
                    <span class="header-title">Dados</span>
                </div>
    
                <hr class="header-line">
                
                <form class="info-form">
                    <div class="form-row">
                        <div class="form-group full-name-group">
                            <label for="full-name">Nome</label>
                            <input type="text" id="full-name" name="full-name">
                        </div>
                        <div class="form-group nickname-group">
                            <label for="nickname">Telefone</label>
                            <input type="text" id="nickname" name="nickname">
                        </div>
                    </div>
            
                    <div class="form-row">
                        <div class="form-group small-group">
                            <label for="cpf">CNPJ</label>
                            <input type="text" id="cpf" name="cpf">
                        </div>
                        <div class="form-group small-group">
                            <label for="gender">E-mail</label>
                            <input type="text" id="email" name="email">
                        </div>
                    </div>
                </form>
    
                <div class="header-info">
                    <span class="header-title">Endereço</span>
                </div>
    
                <hr class="header-line">
    
                <form class="address-form">
                    <div class="address-row">
                        <div class="form-group street-group">
                            <label for="street">Rua</label>
                            <input type="text" id="street" name="street" required>
                        </div>
                        <div class="form-group number-group">
                            <label for="number">Número</label>
                            <input type="text" id="number" name="number" required>
                        </div>
                    </div>
                
                    <div class="address-row">
                        <div class="form-group bairro-group">
                            <label for="bairro">Bairro</label>
                            <input type="text" id="bairro" name="bairro" required>
                        </div>
                        <div class="form-group cep-group">
                            <label for="cep">CEP</label>
                            <input type="text" id="cep" name="cep" required>
                        </div>
                        <div class="form-group country-group">
                            <label for="country">País</label>
                            <input type="text" id="country" name="country" required>
                        </div>
                    </div>
                </form>
                
            </div> <!-- Caixa vertical adicionada -->
        </div>
        </div>
        
        <div class="secondary-box">
            <div class="favorite-animals-header">
                <h1>Animais Cadastrados</h1>
            </div>
            <!-- Carrossel de cards -->
        </div>
    </section>

    <footer class="footer">
        <div class="footer-top">
            <p class="adoption-title">Deseja adotar um animalzinho?</p>
            <button class="adopt-button">Adotar</button>
        </div>
        <div class="footer-divider"></div>
        <div class="footer-columns">
            <div class="column column-1">
                <img src="img/LOGO.png" alt="Logo Miaupets">
            </div>
            <div class="column column-2">
                <h3>Casas de Adoção</h3>
                <p>Conheça nossas casas de adoção.</p>
            </div>
            <div class="column column-3">
                <h3>Contatos</h3>
                <p>(18) 3351-0819<br>miaupets@gmail.com</p>
            </div>
            <div class="column column-4">
                <h3>Redes sociais</h3>
                <div class="social-icons">
                    <img src="img/instagram.png" alt="Instagram">
                    <img src="img/facebook.png" alt="Facebook">
                    <img src="img/snapchat.png" alt="Snapchat">
                    <img src="img/x.png" alt="Twitter">
                </div>
                <p>@miaupets</p>
            </div>
        </div>
        <div class="footer-divider"></div>
        <div class="footer-bottom">
            <p>Todos os direitos foram utilizados ©️</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', async function () {
            const shelterElement = document.getElementById('adoptionShelter');
            const id = shelterElement.getAttribute('data-id'); // Obtém o ID do atributo data-id
            const token = localStorage.getItem('authToken'); // Supondo que o token esteja armazenado no localStorage

            try {
                const response = await fetch(`https://3000-henriquerom-backendmiau-a2xn69goooa.ws-us116.gitpod.io/adoptionShelter/80580714-c9f9-45b9-a63e-d09384954c44`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}` // Adiciona o token no cabeçalho
                    }
                });

                const contentType = response.headers.get("content-type");
                let data;
                if (contentType && contentType.indexOf("application/json") !== -1) {
                    data = await response.json();
                } else {
                    const errorText = await response.text();
                    console.error('Erro: Esperava JSON, mas recebi:', errorText);
                    alert('Erro: ' + errorText);
                    return;
                }

                if (response.ok) {
                    // Exibir dados do abrigo de adoção na página
                    console.log(data);
                    // Aqui você pode adicionar a lógica para renderizar os dados na interface
                } else {
                    alert(data.message || 'Erro ao buscar dados');
                }
            } catch (error) {
                console.error('Erro:', error);
                alert('Erro ao conectar ao servidor');
            }
        });
    </script>
</body>
</html>
